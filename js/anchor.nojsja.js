$(function(){var r=$(".toc-article"),i=document.querySelector(".toc-article"),e=document.querySelector("#sidebar"),s=document.querySelector("#sidebar .toc-nav"),l="toc-item-active",t=e.getBoundingClientRect().left,a=null;function o(){var t;window.IntersectionObserver&&(t=new IntersectionObserver(function(e){e.forEach(function(e){var t,o,n,c;0<e.intersectionRatio?a!==e.target&&(a=e.target,c=s.querySelector("."+l),t=s.querySelector('.toc-nav-link[href="#'+encodeURIComponent(e.target.id)+'"]'),c&&c.classList.remove(l),t)&&t.parentNode&&t.parentNode&&(n=(o=t.getBoundingClientRect()).top-window.innerHeight,o.top<0?i.scrollTop=Math.abs(o.top):0<n&&(i.scrollTop+=40+n),t.parentNode.classList.add(l),r.scrollTop=t.parentNode.offsetTop):e.target===a&&(a=null,c=s.querySelector("."+l))&&c.classList.remove(l)})}),[".post-container h1[id]",".post-container h2[id]",".post-container h3[id]",".post-container h4[id]",".post-container h5[id]"].forEach(function(e){document.querySelectorAll(e).forEach(function(e){t.observe(e)})}))}var n=fnThrottle(function(){e.getBoundingClientRect().top<=0?(r.css("left",t),r.hasClass("toc-fixed")||r.addClass("toc-fixed"),r.hasClass("toc-normal")&&r.removeClass("toc-normal")):(r.css("left",""),r.hasClass("toc-fixed")&&r.removeClass("toc-fixed"),r.hasClass("toc-normal")||r.addClass("toc-normal"),0<i.scrollTop&&(i.scrollTop=0))},10);r.css("height",window.innerHeight),0!==i.getBoundingClientRect().left&&($(document).on("scroll",n),window.onresize=function(){t=e.getBoundingClientRect().left,r.css("left",t).css("height",window.innerHeight),n()},n(),o())});