$(function(){var n=$(".toc-article"),c=document.querySelector(".toc-article"),e=document.querySelector("#sidebar"),r=document.querySelector("#sidebar .toc-nav"),i="toc-item-active",t=e.getBoundingClientRect().left,s=null;function o(){var t;window.IntersectionObserver&&(t=new IntersectionObserver(function(e){e.forEach(function(e){var t,o;0<e.intersectionRatio&&s!==e.target&&(t=r.querySelector("."+i),s&&t&&t.classList.remove(i),s=e.target,e=r.querySelector('.toc-nav-link[href="#'+encodeURIComponent(e.target.id)+'"]'),t&&t.classList.remove(i),e)&&e.parentNode&&e.parentNode&&(o=(t=e.getBoundingClientRect()).top-window.innerHeight,t.top<0?c.scrollTop=Math.abs(t.top):0<o&&(c.scrollTop+=40+o),e.parentNode.classList.add(i),n.scrollTop=e.parentNode.offsetTop)})}),[".post-container h1[id]",".post-container h2[id]",".post-container h3[id]",".post-container h4[id]",".post-container h5[id]"].forEach(function(e){document.querySelectorAll(e).forEach(function(e){t.observe(e)})}))}var l=fnThrottle(function(){e.getBoundingClientRect().top<=0?(n.css("left",t),n.hasClass("toc-fixed")||n.addClass("toc-fixed"),n.hasClass("toc-normal")&&n.removeClass("toc-normal")):(n.css("left",""),n.hasClass("toc-fixed")&&n.removeClass("toc-fixed"),n.hasClass("toc-normal")||n.addClass("toc-normal"),0<c.scrollTop&&(c.scrollTop=0))},10);n.css("height",window.innerHeight),0!==c.getBoundingClientRect().left&&($(document).on("scroll",l),window.onresize=function(){t=e.getBoundingClientRect().left,n.css("left",t).css("height",window.innerHeight),l()},l(),o())});